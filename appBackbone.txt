var Songs = Backbone.Model.extend();

var controller = Backbone.Collection.extend({ model: Songs });

var songView = Backbone.View.extend({
	tagName: "ul",
    className: "listSearch-SoundClound",
    template: _.template($("#songTemplate").html()),
	render: function () {
			alert(this.model.toJSON().toSource())
            this.$el.html(this.template(this.model.toJSON()));
            return this;
    }
});     

var vistaPrincipal = Backbone.View.extend({
		el: "#containerSearch",
		initialize: function () {
			this.collection = new controller();
			this.collection.on("reset", this.render, this);
			this.iniciarSoundClound();
			this.searchSoundClound("Los Piojos")
		},
  		iniciarSoundClound: function(){
			SC.initialize({
  				client_id: "916e614d6781d6abe550e92197ffa1db"
  			});
  		},
  		searchSoundClound: function(value){
  			this.$el.find("ul").remove();
  			SC.get("/tracks", { q: value, limit:50 }, function(tracks, error) {
  				if(!error){
  					this.collection.reset(tracks);
  				}else alert("Error:" + error.message);
			});
  	}
		render: function(){
  			_.each(this.collection.models, function (song) {
  				this.createViewSong(song);
 			},this);
  		},
  		createViewSong: function(){
  			var songVista = new songView({
  							model: song
  			});
  			this.$el.append(songVista.render().el);
  		}
});
var mainView = new vistaPrincipal();

